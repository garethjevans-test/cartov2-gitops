apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: app-maven-kpack-with-subpath
  annotations:
    ootb.apps.tanzu.vmware.com/servicebinding-workload: "true"
    ootb.apps.tanzu.vmware.com/apidescriptor-ref: "true"
    kapp.k14s.io/change-rule: upsert after upserting servicebinding.io/ServiceBindings
  labels:
    app.kubernetes.io/component: run
    carto.run/workload-name: app-maven-kpack-with-subpath
spec:
  template:
    containers:
    - env:
      - name: JAVA_TOOL_OPTIONS
        value: -Dmanagement.endpoint.health.probes.add-additional-paths="true" -Dmanagement.health.probes.enabled="true" -Dserver.port="8080" -Dserver.shutdown.grace-period="24s"
      image: gcr.io/ship-interfaces-dev/app-maven-kpack-with-subpath@sha256:242d9cf913f0681dd06ec9c6f5754c95d39c51494c886852ca8c5994f3edaa7b
      livenessProbe:
        httpGet:
          path: /livez
          port: 8080
          scheme: HTTP
      name: workload
      ports:
      - containerPort: 8080
        protocol: TCP
      readinessProbe:
        httpGet:
          path: /readyz
          port: 8080
          scheme: HTTP
      resources: {}
      securityContext:
        runAsUser: 1000
    serviceAccountName: default
